# 基礎理論
- [基礎理論](#基礎理論)
  - [基数変換](#基数変換)
  - [補数](#補数)
    - [補数](#補数-1)
      - [2の補数の作り方](#2の補数の作り方)
    - [固定小数点](#固定小数点)
  - [浮動小数点](#浮動小数点)
      - [浮動小数点の形式](#浮動小数点の形式)
  - [誤差](#誤差)
    - [誤差](#誤差-1)
      - [桁あふれ誤差](#桁あふれ誤差)
      - [丸め誤差](#丸め誤差)
      - [桁落ち誤差](#桁落ち誤差)

## [基数変換](./RadixConversion.md)

## 補数

### 補数
2進数でしか判断できないコンピュータ内部で、負数を表現する方法の一つとして、補数表現がある。

- 補数は、ある数を決められた数にするために、「補う数」です。
- N進数には、「Ｎ－1の補数」と「Ｎの補数」がある。
- N-1の補数
  - ある数にＮ－１の補数を補うと、与えられた桁数の最大値となる。
- Nの補数
  - ある数にNの補数を補うと、与えられた桁数の次の桁に桁上がりする。

10進数には９の補数と10の補数の二つがある。
- 例えば10進数3桁で表現する場合 [123]
  - 9の補数は876
    - 123+876=999
  - 10の補数は877
    - 123+877=1000
    - ここで、10進数３桁での表現であるため、桁上がりした千の位の1は無視される。なので、123+877=000となる。
    - つまり、0になるので10の補数877は123の対の負数（-123）の意味にもなってくる。
      > このように補数を使って負数を表現することができる。

- 2進数
2進数にも同じような補数がある。
2進数4ビットで表現「0101」の補数を見てみよう
  - 1の補数は「1010」
  - 2の補数は「1011」
    - 10の補数に同じく、0101の負数としての意味も持っている
- コンピュータ内部では演算回路を簡単にするため、2の補数を利用して負数を表現している。
- 補数を使うことで、減算を加算で処理できる。

#### 2の補数の作り方
- 2の補数は1の補数に+1した値。
- 1の補数は正数（比較対象の正の2進数）のビット反転をした値
- 2の補数（負数）から対の正数を求めるには逆にビット反転して＋１すれば求められる

### 固定小数点
コンピュータ内部における数値の表現方法として、固定小数点と浮動小数点がある。
- 固定小数点は小数点の位置を決められた場所に固定して表現する形式
- 整数型として扱う場合は、最右端の右側に小数点がある。
- 負数を扱う場合は、最左端ビットを符号ビットとした２の補数表現を用いる。
  - 例　2進数8ビットの固定小数点（負数は２の補数）
    - 最小値:10000000  (10進で-128)
    - 最大値:01111111（10進数で127）

## 浮動小数点
浮動小数点は実数（小数点のついた数）を扱う場合に使用する形式。  指数を使うことで大きな数や小さな数を固定小数点よりも少ないビット数で表現できます。

#### 浮動小数点の形式
浮動小数点の形式にはいくつもの種類がある。代表的なのはIEEE754,32ビット（単精度）形式

数値は$(-1^S)\times B\times{2^E}$と表現する

- 符号部　S 1bit
  - 仮数部の符号（０：正、１：負）
- 指数部　E 8bit
  - ２を基数として、実際の値に127を加えたバイアス値
- 仮数部  B 23bit
  - 絶対値を２進数で表す。1.Mとなるように桁移動する。（正規化）

- 試しにやってみよう
- １０進数7.25をIEEE754で表現してみよう
1. 正数なので符号Sに0を入れる
2. 7.25を２進数で表現すると111.01 仮数部が1.Mになるように正規化する。
   - $111.01\times{2^0} -正規化> 1.1101\times{2^2}$
   - 仮数部の最上位から順に1101残りのビットに0を入れる。仮数部の1.は自明なので省略されている。
3. 指数部は2+127=129,2進数に基数変換して10000001を入れる

- こっちのほうが分かりやすい(https://medium-company.com/%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%95%B0-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%E6%8A%80%E8%A1%93%E8%80%85%E8%A9%A6%E9%A8%93/#i)

## 誤差

### 誤差
電卓なら、８桁、１２桁のように表現できる桁の上限が決まっています。コンピュータ内部でも、数値を指定されたビット数で表現しているために、真の値と表現する値に差が発生します。
これを誤差といって、以下のような種類がある。

#### 桁あふれ誤差
桁あふれ誤差は演算結果がコンピュータの表現できる範囲を超えることで発生する誤差
- オーバーフロー
  - 演算結果が表現できる範囲を超えてしまうこと
- アンダーフロー
  - 浮動小数点では限りなく0に近づいて表現しきれなくなり発生する。

#### 丸め誤差
丸め誤差は指定された桁数で演算結果を表すために切り捨て、切り上げ、四捨五入などを行うことで発生する誤差

#### 桁落ち誤差
桁落ち誤差は絶対値がほぼ等しい数値の間で、同符号の減産や異符号の加算をしたときに有効桁数が減ることで発生する誤差s