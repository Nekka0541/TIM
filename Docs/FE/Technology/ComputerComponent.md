# コンピュータ構成要素
- [コンピュータ構成要素](#コンピュータ構成要素)
  - [情報の表現](#情報の表現)
    - [情報量の単位](#情報量の単位)
    - [表現可能な情報量](#表現可能な情報量)
    - [大きな数値,小さな数値を表す接頭語](#大きな数値小さな数値を表す接頭語)
    - [文字コード](#文字コード)
  - [コンピュータの構成](#コンピュータの構成)
    - [コンピュータの構成](#コンピュータの構成-1)
    - [ハードウェアとソフトウェア](#ハードウェアとソフトウェア)
    - [プログラム記憶方式](#プログラム記憶方式)
  - [CPU](#cpu)
    - [CPU](#cpu-1)
      - [クロック周波数](#クロック周波数)
      - [バス](#バス)
  - [CPUの動作原理](#cpuの動作原理)
    - [レジスタ](#レジスタ)
    - [命令語](#命令語)
    - [命令実行サイクル](#命令実行サイクル)
    - [アドレス指定方式](#アドレス指定方式)
      - [即値アドレス指定方式](#即値アドレス指定方式)
      - [直接アドレス指定方式](#直接アドレス指定方式)
      - [間接アドレス指定方式](#間接アドレス指定方式)
      - [相対アドレス指定方式](#相対アドレス指定方式)
      - [指標アドレス指定方式](#指標アドレス指定方式)
      - [基底アドレス指定方式](#基底アドレス指定方式)
      - [まとめ](#まとめ)
  - [CPUの高速化技術](#cpuの高速化技術)
    - [CPUの高速化](#cpuの高速化)
      - [逐次制御方式](#逐次制御方式)
      - [パイプライン方式](#パイプライン方式)
      - [スーパーパイプライン方式](#スーパーパイプライン方式)
      - [スーパースカラ方式](#スーパースカラ方式)
    - [マルチコアプロセッサ](#マルチコアプロセッサ)
    - [GPU](#gpu)
  - [半導体メモリ](#半導体メモリ)
    - [半導体メモリ](#半導体メモリ-1)
      - [RAM](#ram)
      - [ROM](#rom)
    - [RAM](#ram-1)
      - [DRAM](#dram)
      - [SRAM](#sram)

## 情報の表現

### 情報量の単位
- コンピュータで扱う最小の情報量の単位を**ビット(bit)** と呼ぶ
  - 2進数の一桁に該当する
- 8個のビットをひとまとめにしたものを**バイト(Byte)** という
  - 2新数の八桁に該当する
- 例えば[10001111]は1バイト（８ビット）の情報量でこのような１と０の羅列を**ビットパターン**と呼ぶ

### 表現可能な情報量
１ビットで表現可能な情報量は[0],[1]の２（$=2^1$）通り、
２ビットでは[00][01][10][11]の４（$=2^2$）通り、
３ビットでは...のように

**一般的にnビットでは$2^n$通りの情報を表現することができる。**

### 大きな数値,小さな数値を表す接頭語
- 大きなバイト（B）を表す単位として、kキロ,Mメガ,Gギガ,TテラがBの接頭語に置くことで表現される
- 小さな数値、例えば処理時間を表すＳ（秒）の前に接頭語　ミリ、マイクロ、ナノ、ピコ（m,μ,n,p）が使われる
> 日々高速化するコンピュータの処理時間などの単位としてマイクロ秒などが扱われる

接頭語の意味は10の累乗になる。

| 接頭語      | 意味       |
| :---------- | :--------- |
| k(キロ)     | $10^3$     |
| M(メガ)     | $10^6$     |
| G(ギガ)     | $10^9$     |
| T(テラ)     | $10^{12}$  |
| m(ミリ)     | $10^{-3}$  |
| μ(マイクロ) | $10^{-6}$  |
| n(ナノ)     | $10^{-9}$  |
| p(ピコ)     | $10^{-12}$ |

- k->M等次の単位に行く場合は1000倍ずつしていけばおｋ
- m->μも同じ要領で-1000倍

1,000,000B(1MB)->1000倍->1,000,000,000B(1GB)
> 1K=1024($2^{10}$)　にすることもある

### 文字コード
- 文字コードは、文字の一つ一つが２進数で表現された識別番号である。
> 例えば「あ」の文字には[1000 0010 1010 0000]識別番号が割り振られている。（Shift-JIS）
- 文字化けは作成した人が使用した文字コードと異なる文字コードをあてはめたことが原因。

代表的な文字コード
- ASCIIコード
  - 英数字、記号、制御文字のみ。米国標準符号で最も基本となる文字コード。
  - 日本語はない。
- Shift-JIS
  - ASCIIに日本語をプラスしたもの
- EUC
  - Unix,Linuxで使用される文字コード
  - 日本語もある
- Unicode
  - 世界の文字を一つの体系にしたもの。
  - それを符号化する方式の一つがUTF-8

## コンピュータの構成

### コンピュータの構成

コンピュータは以下の５つの装置からなる。
- 制御装置
- 演算装置
- 記憶装置
- 入力装置
- 出力装置

制御装置と演算装置を合わせて **中央処理装置（CPU:Central Processing Unit）** といい、コンピュータの頭脳に当たる。
 
| 装置 |          | 役割                                                                     |
| :--- | -------- | :----------------------------------------------------------------------- |
| CPU  | 制御装置 | 記憶装置からプログラムの命令を取り出して解読して、各装置に指示を与える。 |
| ^    | 演算装置 | 四則演算や論理演算を行う。                                               |
| >    | 記憶装置 | データやプログラムを記憶する。メモリ                                     |
| >    | 入力装置 | コンピュータの外部からプログラムやデータを読み込む                       |
| >    | 出力装置 | コンピュータの内部で処理されたデータを外部へ書き出す。                   |

[コンピュータの構成図](https://basics.k-labo.work/wordpress/wp-content/uploads/2017/10/b42076795c9ceb1d31f6cf3b81d46409.png)

### ハードウェアとソフトウェア
上記に上げた5つの装置はいづれも**ハードウェア**です。
一方でプログラムやアプリケーションソフトウェアは**ソフトウェア**に該当する。記憶装置に記憶された１と０の信号の集まりで存在する。

### プログラム記憶方式
プログラム記憶方式は**主記憶に記憶させたプログラムをCPUが順に取り出し、解読・実行する方式**です。
ハードウェアの変更が不要でプログラムを変更することで様々な処理を行うことができる。
**主記憶**はCPUから直接アクセスできる記憶装置で、メモリ、メインメモリと呼ばれる。

## CPU

### CPU
CPUはコンピュータの頭脳にあたり、**プロセッサ**とも呼ばれている。
CPUの性能は主にクロック周波数とバス幅で表現される。
#### クロック周波数
- クロック信号（クロックパルス）
  - 各装置の動作タイミングを合わせるためにCPUが発している周期的な信号
  - 一定の間隔で電圧が規則的に「高」「低」を繰り返す信号が生成される。
- クロック周波数
  - クロック信号の高低のサイクルが１秒間に繰り返される回数を**クロック周波数**と呼ぶ。
  - 単位には **Hz(ヘルツ)** が使われる
  - 例えば、クロック周波数が2GHzとは、１秒間に$2\times10^{9}$回の信号を生成していることを示している。
  - この信号に合わせて、コンピュータが動作している。
  - 内部クロック
    - CPU内部のクロック周波数
  - 外部クロック
    - CPUと各装置を結ぶ経路の周波数

#### バス
- バスは**コンピュータ内部でデータをやり取りするための伝送路**のことです。人に例えると血管に当たる。
- 一般的にバス幅が広く、クロック周波数が大きいほど高速にデータを送受信することができる。

## CPUの動作原理

### レジスタ
- CPUに内蔵されている高速な記憶装置

レジスタには以下のような種類があり、命令の実行時に使用される。

| 種類                                       | 説明                                                           |
| :----------------------------------------- | :------------------------------------------------------------- |
| 命令レジスタ                               | 実行する命令を格納する。                                       |
| 命令アドレスレジスタ（プログラムカウンタ） | 次に実行する命令のアドレスを格納する。                         |
| 指標レジスタ（ベースレジスタ）             | 基準となるアドレスを格納する。指標アドレス指定方式で使用する。 |
| 基底レジスタ（ベースレジスタ）             | 演算対象や演算結果を格納する。                                 |
| 汎用レジスタ                               | 演算対象や演算結果を格納する。そのほか各種の目的に使用する。 |

### 命令語
プログラムはコンピュータに行わせる命令が集まったもので、プログラム言語で記述された命令は、最終的にコンピュータが理解できる1と０の機械語（命令語）に変換され、解読、実行される。
機械語の命令語は、**命令部**と、**アドレス部（オペランド部）**　で構成される。

### 命令実行サイクル

[命令実行サイクル](https://images.app.goo.gl/JunzW9mV6RMqstaz6)

| 命令                  | 説明                                                                                                                                                                                                                             |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ①命令の取り出し       | 命令アドレスレジスタを参照して、命令が格納されている主記憶上のアドレスを取得する。取得したアドレスから命令を取り出し（命令フェッチ）、命令レジスタに格納する。この時、命令アドレスレジスタには、次の命令のアドレスをセットする。 |
| ②命令の解読           | 命令レジスタの命令部にはデコーダで解読され、演算装置に指示を出す。                                                                                                                                                               |
| ③実効アドレス計算     | 命令レジスタのアドレス部の値は、アドレスレジスタに送られ、処理対象のデータが格納されているアドレス（実効アドレス）を計算する。                                                                                                   |
| ④オペランドの取り出し | 処理対象のデータを取り出し、演算装置に送る                                                                                                                                                                                       |
| ⑤命令の実行           | 演算装置で演算を実行する                                                                                                                                                                                                         |
| ⑥演算結果の格納       | 演算結果を格納する |

### アドレス指定方式
コンピュータは主記憶上にあるプログラムの命令を一つづつ取り出して解読、実行している。
- アドレス指定方式
  - 命令のアドレス部の値から処理対象のデータが格納されている実効アドレスを求める方式
    - > アドレス修飾とも呼ばれている。
#### 即値アドレス指定方式
- 命令のアドレス部にデータそのものを格納している方式
  > アドレスではなく、データそのものが格納されている。

#### 直接アドレス指定方式
- 命令のアドレス部の値を実効アドレスとする方式

#### 間接アドレス指定方式
- 命令のアドレス部の値が示すアドレスに格納されている値を実効アドレスとする方式

#### 相対アドレス指定方式
- 命令のアドレス部の値と命令アドレスレジスタ（プログラムカウンタ）の値の和を実効アドレスとする方式

#### 指標アドレス指定方式
- 命令のアドレス部の値と指標レジスタの値の和を、実効アドレスとする方式
- インデックスアドレス指定方式とも呼ばれている。

#### 基底アドレス指定方式
- 命令のアドレス部の値と基底レジスタの値の和を、実効アドレスとする方式
- ベースアドレス指定方式とも呼ばれている。

#### まとめ
| アドレス指定方式 | 実効アドレスの求め方                                          |
| :--------------: | :------------------------------------------------------------ |
|       即値       | 命令のアドレス部の値はデータそのもの                          |
|       直接       | アドレス部の値>実効アドレス                                   |
|       間接       | アドレス部の値が示すアドレスに格納されている値 > 実効アドレス |
|       相対       | アドレス部の値＋プログラムカウンタの値 > 実効アドレス         |
|       指標       | アドレス部の値＋指標レジスタの値 > 実効アドレス               |
|       基底       | アドレス部の値＋基底レジスタの値 > 実効アドレス               |

## CPUの高速化技術
### CPUの高速化
命令は以下のステージで行われる
1. 命令の取り出し
2. 命令の解読
3. 実効アドレス計算
4. オペランドの取り出し
5. 命令の実行
6. 演算結果の格納

これらのステージの実行方式には次のようなものある
#### 逐次制御方式
- １命令ずつ順番に繰り返し実行する方式
- 制御装置や演算装置が動作しない時間が生じてしまい、処理効率が悪くなる。

#### パイプライン方式
- 複数の命令を１ステージずつずらしながら並行処理することで高速化を図る方式。
- 効率化はされるが、分岐命令が現れるとそれまで先読みしていた命令を破棄して新たな分岐先の命令を実行しなくてはいけない
- 処理の順序が乱れることをパイプラインハザードと呼ぶ。
- 分岐命令へ対処する技術として次のようなものが挙げられる
  - 分岐予測
    - 実行される確率が高い方を予測する
  - 投機実行
    - 予測した分岐先の命令を開始して結果を保持し、分岐先が正しければその結果を利用する。

#### スーパーパイプライン方式
- パイプライン方式をさらに細分化することことで高速化を図る方式

#### スーパースカラ方式
- 複数のパイプラインを使用して、同時に複数の命令を実行することで高速化を図る方式

### マルチコアプロセッサ
- マルチコアプロセッサ
  - 一つのCPU内に複数のコア（演算回路の中核部分）を備えたもの
- 従来のシングルコアに比べて消費電力を抑え、処理速度の高速化を図ることができる。
- ２つのコアならデュアルコア、４つなら、クアッドコア、８つならオクタコアと呼ぶ
- 複数のコアがそれぞれ同時に別々の処理を実行（並列処理）することで、処理能力の向上ができる。
### GPU
GPU(Graphics Processing Unit)は行列演算を用いて3Dの画像処理を高速に実行する画像処理装置
- 数千個のコアでデータを並列処理することができる。

## 半導体メモリ

### 半導体メモリ
コンピュータの記憶装置に使われている半導体メモリには、特性や用途で次のようなものがある。

#### RAM
- 読み書きできるメモリ
- 電源を切ると記憶していた内容が消える（**揮発性**）

#### ROM
- 本来は読み出し専用のメモリ
- 最近は書き込みできるROMも登場して生きている。
- 電源を切っても記憶内容が消えない（**不揮発性**）


### RAM
RAMにはさらに次のようなものがある。

#### DRAM
Dynamic RAMはコンデンサに電荷を備えた状態か否かによって１ビットを表現している。
- 構造がシンプルで高集積化に適しているため、SRAMに比べて大容量で安価
- コンデンサは放置しておくと自然放電してしまう特性があり、一定期間毎に記憶内容を維持するリフレッシュ動作が必要
- 主記憶に用いられる。

#### SRAM
Static RAMはフリップフロップ回路で構成されている。
- 高速だが、構造が複雑で集積度を高めにくい
- DRAMに比べ小容量で高価
- 電源が供給されている限り、記憶内容を保持し続けるため、リフレッシュ動作が不要
- キャッシュメモリに使用される。

SRAM,DRAMの特徴を表にまとめると次の通り
| 種別 | 使用回路             | リフレッシュ | 速度 | 集積度 | 価格 | 用途   |
| :--- | -------------------- | ------------ | ---- | ------ | ---- | ------ |
| DRAM | コンデンサ           | 必要         | 低速 | 高い   | 安価 | 主記憶 |
| SRAM | フリップフロップ回路 | 不要         | 高速 | 低い   | 高価 | キャッシュメモリ |

