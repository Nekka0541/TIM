# 第２章 オブジェクトの生成と消滅
この章では、いつどのようにオブジェクトを生成すべきか、避けるべきか、オブジェクトの適切なタイミングでの消滅をどのように保証するか、そしてオブジェクトの消滅の前に実行しなければならない後処理をどのように行うかを扱う。

## 項目1 コンストラクタの代わりにstaticファクトリメソッドを検討する
クラスのインスタンスをクライアントが得られるようにするにはpublicコンストラクタを利用するのが一般的であるが、
もう一つの方法として、**staticファクトリメソッド**がある。
このメソッドはクラスのインスタンスを返す単なるstaticのメソッドである
- booleanプリミティブ型をBooleanオブジェクト参照に変換する
```java
public static Boolean valueOf(boolean b){
    return b ? Boolean.TRUE : Boolean.FALSE;
}
```
staticファクトリメソッドはデザインパターンのFactoryMethodパターンとは異なる。
本項目で述べられているstaticファクトリメソッドと直接的に同じものはデザインパターンにはない。

クラスはコンストラクタの代わり、またはコンストラクタに加えてクライアントに対してstaticファクトリメソッドを提供できる。
staticファクトリメソッドには次のような長所と短所がある。
- 長所
  1. コンストラクタと異なり、メソッド名に別名を付けることができる。
    > クラスは特定のシグニチャ（メソッド宣言にて、メソッド名(引数型 引数名)の塊）のコンストラクタを一つしか持てない。そのため、プログラマはシグネチャが異なるコンストラクタを用意して、この制約を避けていた。そのような実装がされたクラスを使用する場合、誤ったコンストラクタを呼び出してしまう恐れがある。
  2. 呼び出しする際にコンストラクタと異なり毎回オブジェクト生成する必要がない
    コンストラクタを実行したい場合は、必ず対象クラスのインスタンスをnewする必要があるが、staticファクトリメソッドを使用すれば、一度生成したインスタンスを繰り返し利用することが可能。
    同じインスタンスが一つだけしか存在しない、またはそのインスタンスがn個以上存在することがないことを保証している状態を**インスタンス制御されている**という。
  3. 戻り値の型そのものではなく、そのサブタイプのオブジェクトを返せる。
    > サブタイプとは　サブクラス、実装クラスのこと。
    ```java
    public interface Hoge{
        public void hoge1 (String str);
    }
    public class Huga implements Hoge{
        private String piyo;
        public void hoge1 (String str){
            this.piyo += str;
        }
        public static Hoge hugaReturn(){
            return this.piyo;
        }
    }
    public static 
    ```
    例としてjava.util.CollectionsにはemptyList()というstaticファクトリメソッドがある。
    - emptyListは内部クラスEmptyListのインスタンスを返却する。内部クラスEmptyListはpublicじゃないため、外部から隠ぺい可能
    - emptyListの戻り値の型は実装元のListインターフェース。（実際に返却するのは↑
    - これにより、Listインターフェースの使用方法だけ知っていれば良き(すごすぎ)
  4. 返されるオブジェクトのクラスは入力パラーメータの値に応じて変更することができる
        
